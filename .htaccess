# Enable rewrite engine
RewriteEngine On

# Security headers
Header always set X-Frame-Options "DENY"
Header always set X-XSS-Protection "1; mode=block"
Header always set X-Content-Type-Options "nosniff"
Header always set Referrer-Policy "strict-origin-when-cross-origin"

# Prevent access to sensitive files
<Files ~ "^\.">
    Order allow,deny
    Deny from all
</Files>

<Files "config.php">
    Order allow,deny
    Deny from all
</Files>

<Files "setup.php">
    Order allow,deny
    Deny from all
</Files>

<Files "error.log">
    Order allow,deny
    Deny from all
</Files>

# Custom error pages
ErrorDocument 404 /weddinglink/error.php
ErrorDocument 403 /weddinglink/error.php
ErrorDocument 500 /weddinglink/error.php

# URL rewriting (optional - for pretty URLs)
# RewriteRule ^package/([0-9]+)$ packages.php?id=$1 [L]
# RewriteRule ^vendor/([0-9]+)$ vendors.php?id=$1 [L]

# Compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript
</IfModule>

# Cache control
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/pdf "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType text/html "access plus 600 seconds"
</IfModule>